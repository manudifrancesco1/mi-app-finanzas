(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[684],{6415:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/budgets",function(){return n(441)}])},441:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var a=n(5893),s=n(7294),i=n(9263),o=n(1163);function l(){let e=(0,o.useRouter)(),[t,n]=(0,s.useState)([]),[l,r]=(0,s.useState)([]),[c,d]=(0,s.useState)({category_id:0,month:"",limit_amount:""}),[u,m]=(0,s.useState)(null),h=async()=>{let{data:e,error:t}=await i.O.from("categories").select("id, name, type").order("name",{ascending:!0});!t&&e&&n(e)},g=async()=>{let{data:e,error:t}=await i.O.from("budgets").select("\n        id,\n        month,\n        limit_amount,\n        category:categories ( id, name )\n      ").order("month",{ascending:!1});t?m(t.message):e&&r(e.map(e=>({id:e.id,month:e.month,limit_amount:e.limit_amount,category_id:e.category.id,category_name:e.category.name})))};(0,s.useEffect)(()=>{h(),g()},[]);let b=e=>{d({...c,[e.target.name]:e.target.value})},p=async()=>{m(null);let e=(await i.O.auth.getUser()).data.user;if(!e){m("Debes iniciar sesi\xf3n");return}let{error:t}=await i.O.from("budgets").insert({user_id:e.id,category_id:c.category_id,month:c.month,limit_amount:parseFloat(c.limit_amount)});t?m(t.message):(d({category_id:0,month:"",limit_amount:""}),g())};return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50 p-6",children:[(0,a.jsxs)("div",{className:"flex gap-4 mb-6",children:[(0,a.jsx)("button",{onClick:()=>e.push("/"),className:"text-blue-600 hover:underline",children:"← Dashboard"}),(0,a.jsx)("button",{onClick:()=>e.push("/categories"),className:"text-blue-600 hover:underline",children:"← Categor\xedas"}),(0,a.jsx)("button",{onClick:()=>e.push("/transactions"),className:"text-blue-600 hover:underline",children:"← Transacciones"})]}),(0,a.jsx)("h1",{className:"text-2xl font-semibold mb-4",children:"Mis Presupuestos"}),u&&(0,a.jsx)("p",{className:"text-red-500 mb-2",children:u}),(0,a.jsxs)("div",{className:"bg-white p-4 rounded shadow mb-6 grid grid-cols-1 md:grid-cols-4 gap-2",children:[(0,a.jsxs)("select",{name:"category_id",value:c.category_id,onChange:b,className:"border p-2 rounded col-span-1",children:[(0,a.jsx)("option",{value:0,children:"-- Elige categor\xeda --"}),t.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,a.jsx)("input",{name:"month",type:"month",value:c.month,onChange:b,className:"border p-2 rounded col-span-1"}),(0,a.jsx)("input",{name:"limit_amount",type:"number",placeholder:"L\xedmite",value:c.limit_amount,onChange:b,className:"border p-2 rounded col-span-1"}),(0,a.jsx)("button",{onClick:p,className:"bg-blue-500 text-white py-2 rounded hover:bg-blue-600 transition col-span-1",children:"Agregar"})]}),(0,a.jsx)("div",{className:"space-y-2",children:l.map(e=>(0,a.jsxs)("div",{className:"bg-white p-4 rounded shadow flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium",children:e.category_name}),(0,a.jsx)("div",{className:"text-gray-600",children:e.month})]}),(0,a.jsx)("div",{className:"text-right",children:e.limit_amount.toLocaleString()})]},e.id))})]})}},9263:function(e,t,n){"use strict";n.d(t,{O:function(){return o}});var a=n(8590);let s="https://dbuxsnccinjldvxiooye.supabase.co",i="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRidXhzbmNjaW5qbGR2eGlvb3llIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk4NTM4NTgsImV4cCI6MjA2NTQyOTg1OH0.Td7-Z8AY9b_EGrbZ_Taxeif0LMkDQ1sQiOL2GU5S5tI";console.log("Supabase URL:",s),console.log("Supabase ANON KEY:",i.slice(0,10)+"…");let o=(0,a.eI)(s,i);console.log("\uD83D\uDEF0️  Supabase Client URL:",s),console.log("\uD83D\uDD11  Supabase Client Key:",i.slice(0,8)+"…")}},function(e){e.O(0,[590,888,774,179],function(){return e(e.s=6415)}),_N_E=e.O()}]);