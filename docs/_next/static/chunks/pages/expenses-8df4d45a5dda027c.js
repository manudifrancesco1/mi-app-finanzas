(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[689],{8448:function(e,n,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/expenses",function(){return s(3788)}])},3788:function(e,n,s){"use strict";s.r(n);var a=s(5893),t=s(7294),l=s(9263),r=s(8078);n.default=()=>{let[e,n]=(0,t.useState)([]),[s,i]=(0,t.useState)(null),[d,o]=(0,t.useState)(!1),c=async()=>{i(null);let{data:{session:e}}=await l.O.auth.getSession();if(!e)return;let s=e.user.id,{data:a,error:t}=await l.O.from("transactions").select("\n        id,\n        amount,\n        date,\n        description,\n        category:category_id(name),\n        subcategory:subcategory_id(name)\n      ").eq("user_id",s).order("date",{ascending:!1});t?(console.error(t),i(t.message)):a&&n(a.map(e=>{var n,s,a,t,l,r;let i=e.category,d=e.subcategory,o=Array.isArray(i)?null!==(a=null===(n=i[0])||void 0===n?void 0:n.name)&&void 0!==a?a:"":null!==(t=null==i?void 0:i.name)&&void 0!==t?t:"",c=Array.isArray(d)?null!==(l=null===(s=d[0])||void 0===s?void 0:s.name)&&void 0!==l?l:null:null!==(r=null==d?void 0:d.name)&&void 0!==r?r:null;return{id:e.id,amount:e.amount,date:e.date,description:e.description,category:{name:o},subcategory:c?{name:c}:null}}))};return(0,t.useEffect)(()=>{c()},[]),(0,a.jsxs)("main",{className:"p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"Gastos"}),(0,a.jsx)("button",{onClick:()=>o(!0),className:"px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-full shadow-sm transition",children:"+ Agregar Gasto"})]}),s&&(0,a.jsx)("p",{className:"text-red-600 mb-4",children:s}),(0,a.jsx)("ul",{className:"space-y-2",children:e.map(e=>{var n;return(0,a.jsxs)("li",{className:"flex justify-between p-3 bg-white rounded shadow-sm",children:[(0,a.jsx)("span",{className:"w-24",children:e.date}),(0,a.jsx)("span",{className:"flex-1",children:e.category.name}),(0,a.jsx)("span",{className:"flex-1",children:(null===(n=e.subcategory)||void 0===n?void 0:n.name)||"-"}),(0,a.jsx)("span",{className:"flex-1",children:e.description||"-"}),(0,a.jsxs)("span",{className:"w-24 text-right",children:["$",e.amount.toFixed(2)]})]},e.id)})}),d&&(0,a.jsx)(r.Z,{onClose:()=>o(!1),onSaved:()=>{o(!1),c()}})]})}}},function(e){e.O(0,[590,78,888,774,179],function(){return e(e.s=8448)}),_N_E=e.O()}]);