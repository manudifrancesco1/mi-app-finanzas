(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[221],{8697:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/fixed-expenses",function(){return a(9306)}])},9263:function(e,t,a){"use strict";a.d(t,{O:function(){return o}});var s=a(8590);let n="https://dbuxsnccinjldvxiooye.supabase.co",i="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRidXhzbmNjaW5qbGR2eGlvb3llIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk4NTM4NTgsImV4cCI6MjA2NTQyOTg1OH0.Td7-Z8AY9b_EGrbZ_Taxeif0LMkDQ1sQiOL2GU5S5tI";console.log("Supabase URL:",n),console.log("Supabase ANON KEY:",i.slice(0,10)+"…");let o=(0,s.eI)(n,i);console.log("\uD83D\uDEF0️  Supabase Client URL:",n),console.log("\uD83D\uDD11  Supabase Client Key:",i.slice(0,8)+"…")},9306:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return c}});var s=a(5893),n=a(7294),i=a(1163),o=a(9263);function c(){let e=(0,i.useRouter)(),[t,a]=(0,n.useState)([]),[c]=(0,n.useState)(new Date().toISOString().slice(0,7)),l=async()=>{let{data:{user:t}}=await o.O.auth.getUser();if(!t){e.push("/login");return}let{data:s,error:n}=await o.O.from("fixed_expenses").select("\n        id,\n        category_id,\n        subcategory_id,\n        amount,\n        label,\n        last_paid_month,\n        category:categories ( name ),\n        subcat:subcategories ( name )\n      ").eq("user_id",t.id);n?console.error("Error loading fixed expenses:",n):a(s||[])},r=async e=>{let{data:{user:a}}=await o.O.auth.getUser();if(!a)return;await o.O.from("fixed_expenses").update({last_paid_month:c}).eq("id",e);let s=t.find(t=>t.id===e);s&&await o.O.from("transactions").insert({user_id:a.id,category_id:s.category_id,subcategory_id:s.subcategory_id,amount:s.amount,date:new Date().toISOString().slice(0,10),payment_method_id:null,description:"Pago fijo: ".concat(s.label),tags:[]}),l()};return(0,n.useEffect)(()=>{l()},[]),(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50 p-6",children:[(0,s.jsx)("button",{onClick:()=>e.push("/"),className:"mb-4 text-blue-600 hover:underline",children:"← Dashboard"}),(0,s.jsxs)("h1",{className:"text-2xl font-semibold mb-4",children:["Pagos Fijos (",c,")"]}),(0,s.jsx)("ul",{className:"space-y-3",children:t.map(e=>(0,s.jsxs)("li",{className:"bg-white p-4 rounded-2xl shadow-ios flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"font-medium",children:[e.category.name," / ",e.subcat.name]}),(0,s.jsxs)("div",{className:"text-gray-600",children:["Monto: ",e.amount]})]}),(0,s.jsx)("button",{disabled:e.last_paid_month===c,onClick:()=>r(e.id),className:"px-4 py-2 rounded-xl text-white transition ".concat(e.last_paid_month===c?"bg-gray-300 cursor-default":"bg-blue-500 hover:bg-blue-600"),children:e.last_paid_month===c?"Pagado":"Marcar pagado"})]},e.id))})]})}}},function(e){e.O(0,[590,888,774,179],function(){return e(e.s=8697)}),_N_E=e.O()}]);