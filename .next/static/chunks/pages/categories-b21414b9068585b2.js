(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[161],{2538:function(e,s,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/categories",function(){return i(6800)}])},9263:function(e,s,i){"use strict";i.d(s,{O:function(){return l}});var a=i(8590);let t="https://dbuxsnccinjldvxiooye.supabase.co",n="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRidXhzbmNjaW5qbGR2eGlvb3llIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk4NTM4NTgsImV4cCI6MjA2NTQyOTg1OH0.Td7-Z8AY9b_EGrbZ_Taxeif0LMkDQ1sQiOL2GU5S5tI";console.log("Supabase URL:",t),console.log("Supabase ANON KEY:",n.slice(0,10)+"…");let l=(0,a.eI)(t,n);console.log("\uD83D\uDEF0️  Supabase Client URL:",t),console.log("\uD83D\uDD11  Supabase Client Key:",n.slice(0,8)+"…")},6800:function(e,s,i){"use strict";i.r(s);var a=i(5893),t=i(7294),n=i(9263);s.default=()=>{let[e,s]=(0,t.useState)([]),[i,l]=(0,t.useState)({name:"",is_fixed:!1}),[r,c]=(0,t.useState)(null);(0,t.useEffect)(()=>{(async()=>{let{data:{user:e}}=await n.O.auth.getUser();if(!e)return;let{data:i,error:a}=await n.O.from("categories").select("id, name, is_fixed").eq("user_id",e.id).eq("type","expense").order("name",{ascending:!0});a?c(a.message):s(i||[])})()},[]);let d=e=>{let{name:s,value:i,type:a,checked:t}=e.target;l(e=>({...e,[s]:"checkbox"===a?t:i}))},o=async e=>{e.preventDefault(),c(null);let{data:{user:a}}=await n.O.auth.getUser();if(!a){c("Debes iniciar sesi\xf3n");return}let t={name:i.name,is_fixed:i.is_fixed,type:"expense",user_id:a.id},{error:r}=await n.O.from("categories").insert(t);if(r)c(r.message);else{let{data:e}=await n.O.from("categories").select("id, name, is_fixed").eq("user_id",a.id).eq("type","expense").order("name",{ascending:!0});s(e||[]),l({name:"",is_fixed:!1})}},u=async i=>{if(!confirm("\xbfEliminar categor\xeda?"))return;let{error:a}=await n.O.from("categories").delete().eq("id",i);a?c(a.message):s(e.filter(e=>e.id!==i))};return(0,a.jsxs)("main",{className:"p-4 space-y-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"Categor\xedas"}),r&&(0,a.jsx)("p",{className:"text-red-600",children:r}),(0,a.jsxs)("form",{onSubmit:o,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block mb-1",children:"Nombre"}),(0,a.jsx)("input",{type:"text",name:"name",value:i.name,onChange:d,className:"w-full border rounded p-2",required:!0})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{id:"is_fixed",name:"is_fixed",type:"checkbox",checked:i.is_fixed,onChange:d,className:"h-4 w-4"}),(0,a.jsx)("label",{htmlFor:"is_fixed",children:"Gasto fijo"})]}),(0,a.jsx)("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar"})]}),(0,a.jsxs)("section",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Lista de categor\xedas"}),(0,a.jsx)("ul",{className:"space-y-2",children:e.map(e=>(0,a.jsxs)("li",{className:"flex justify-between items-center bg-white p-3 rounded shadow-sm",children:[(0,a.jsxs)("span",{children:[e.name," ",e.is_fixed&&(0,a.jsx)("em",{children:"(Fijo)"})]}),(0,a.jsx)("button",{onClick:()=>u(e.id),className:"text-red-600 hover:underline",children:"Eliminar"})]},e.id))})]})]})}}},function(e){e.O(0,[590,888,774,179],function(){return e(e.s=2538)}),_N_E=e.O()}]);